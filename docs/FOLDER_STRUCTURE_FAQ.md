# Folder Structure FAQ

## â“ Common Questions About Project Structure

### 1. What is the `src/declarations/` folder?

**Answer:** This folder contains **auto-generated Candid interface bindings** created by DFX when you deploy canisters.

**Purpose:**
- Provides type-safe TypeScript/JavaScript interfaces for communicating with canisters
- Auto-generated from your Motoko code by the DFX compiler
- Enables frontend code to call backend canister methods with proper type checking

**Contents:**
```
declarations/
â”œâ”€â”€ credential_backend/
â”‚   â”œâ”€â”€ credential_backend.did         # Candid interface definition
â”‚   â”œâ”€â”€ credential_backend.did.d.ts    # TypeScript type definitions
â”‚   â”œâ”€â”€ credential_backend.did.js      # JavaScript bindings
â”‚   â”œâ”€â”€ index.d.ts                     # TypeScript module exports
â”‚   â””â”€â”€ index.js                       # JavaScript module exports
â””â”€â”€ credential_frontend/
    â””â”€â”€ [similar files for frontend canister]
```

**âš ï¸ DO NOT:**
- âŒ Edit these files manually (they will be overwritten)
- âŒ Delete this folder (required for frontend-backend communication)
- âŒ Restructure or rename (DFX expects specific paths)

**âœ… DO:**
- âœ… Import from these in your frontend code
- âœ… Let DFX regenerate them on each deployment
- âœ… Add to `.gitignore` if you don't want to commit them (optional)

### 2. Why are there `credential_backend` and `credential_frontend` folders inside declarations?

**Answer:** One folder is created for **each canister** defined in your `dfx.json`.

**Explanation:**
- `credential_backend` â†’ Generated from `src/backend/main.mo` canister
- `credential_frontend` â†’ Generated for the frontend assets canister

This is **by design** and matches your canister names in dfx.json:
```json
{
  "canisters": {
    "credential_backend": {...},   // â†’ declarations/credential_backend/
    "credential_frontend": {...}   // â†’ declarations/credential_frontend/
  }
}
```

**Why not "backend" and "frontend"?**
The folder names match the **canister names** in dfx.json, not the source folder names. This is intentional to avoid ambiguity when you have multiple canisters.

### 3. Do we need the declarations folder?

**Answer:** **YES, ABSOLUTELY!** âœ…

**Why it's critical:**
1. **Frontend-Backend Communication**: Your React app imports these to call canister methods
2. **Type Safety**: Provides TypeScript types for all canister functions
3. **DFX Requirement**: DFX expects this folder structure
4. **Auto-Updated**: Keeps frontend in sync with backend API changes

**Example usage in frontend:**
```javascript
import { credential_backend } from '../declarations/credential_backend';

// Call backend method with type safety
const result = await credential_backend.issueCertificate(...);
```

Without this folder, your frontend **cannot communicate** with your backend canisters.

### 4. Why does `src/frontend/` have another `src/` folder inside it?

**Answer:** This is the **standard Vite/React project structure** and is **correct**. âœ…

**Explanation:**
```
src/frontend/              # Workspace root (DFX workspace path)
â”œâ”€â”€ src/                  # Application source code (React convention)
â”‚   â”œâ”€â”€ App.jsx          # Main React component
â”‚   â”œâ”€â”€ main.jsx         # React entry point
â”‚   â”œâ”€â”€ components/      # UI components
â”‚   â””â”€â”€ vite-env.d.ts    # Vite type definitions
â”œâ”€â”€ public/              # Static assets (served as-is)
â”œâ”€â”€ dist/                # Build output (generated)
â”œâ”€â”€ index.html           # Entry HTML (Vite convention: root level)
â”œâ”€â”€ package.json         # NPM dependencies
â”œâ”€â”€ vite.config.js       # Vite bundler configuration
â””â”€â”€ tsconfig.json        # TypeScript configuration
```

**Why this structure?**
- `src/frontend/` is the **DFX workspace** (set in dfx.json)
- `src/frontend/src/` contains **actual source code** (Vite/React convention)
- `src/frontend/dist/` is the **build output** (what gets deployed)

This is **industry standard** for Vite projects. Do NOT flatten this structure.

### 5. Does the structure need any restructuring?

**Answer:** **NO** - The current structure is **production-ready** and follows best practices. âœ…

**Current structure is correct because:**

1. **src/backend/** - Clean, modular Motoko code âœ…
2. **src/frontend/** - Standard Vite/React structure âœ…
3. **src/declarations/** - Auto-generated by DFX (don't touch) âœ…
4. **docs/** - Well-organized documentation âœ…
5. **benchmarks/** - Clear performance testing tools âœ…

**Do NOT restructure:**
- âŒ Don't move or rename `declarations/`
- âŒ Don't flatten `frontend/src/` to `frontend/`
- âŒ Don't rename canister-related folders

## ğŸ¯ Production-Ready Checklist

### âœ… Current Structure is Production-Ready

- âœ… **Modular Backend**: 6 focused Motoko modules in `src/backend/`
- âœ… **Standard Frontend**: Vite/React best practices in `src/frontend/`
- âœ… **Auto-Generated Bindings**: DFX handles `declarations/` correctly
- âœ… **Organized Documentation**: All docs in `docs/` folder
- âœ… **Clear Tooling**: Benchmarks in `benchmarks/` folder
- âœ… **Consistent Naming**: Follows Internet Computer conventions
- âœ… **Clean Root**: No scattered files, everything organized

### ğŸ“ Understanding the Structure

**DFX-Managed (Auto-Generated):**
```
src/declarations/     # â† DFX creates and updates this
.dfx/                 # â† DFX local state
.env                  # â† DFX canister IDs
```

**Developer-Managed (You edit these):**
```
src/backend/          # â† Your Motoko code
src/frontend/src/     # â† Your React code
docs/                 # â† Your documentation
benchmarks/           # â† Your test scripts
```

**Build Outputs (Generated):**
```
src/frontend/dist/    # â† Vite builds here
.dfx/local/           # â† DFX deploys here
```

## ğŸš€ Best Practices

### When Working with Declarations

```bash
# Regenerate declarations after backend changes
dfx deploy credential_backend

# The declarations/ folder will auto-update with new types
```

### When Developing Frontend

```bash
# Work in src/frontend/src/
cd src/frontend
npm install
npm run dev

# Build creates dist/ folder
npm run build
```

### When Deploying

```bash
# DFX handles everything
dfx deploy

# This will:
# 1. Compile src/backend/ â†’ Wasm
# 2. Build src/frontend/ â†’ dist/
# 3. Update src/declarations/ â†’ new bindings
# 4. Deploy both canisters
```

## ğŸ“š Further Reading

- **[DFX Project Structure](https://internetcomputer.org/docs/current/developer-docs/setup/project-structure)** - Official ICP docs
- **[Candid Interface Language](https://internetcomputer.org/docs/current/developer-docs/build/candid/candid-concepts)** - Understanding .did files
- **[Vite Project Structure](https://vitejs.dev/guide/)** - Frontend structure explanation

## ğŸ’¡ Summary

| Folder | Purpose | Edit? | Restructure? |
|--------|---------|-------|--------------|
| `src/backend/` | Your Motoko code | âœ… Yes | âŒ No (already clean) |
| `src/frontend/` | Your React app | âœ… Yes | âŒ No (standard Vite) |
| `src/frontend/src/` | React source code | âœ… Yes | âŒ No (Vite convention) |
| `src/declarations/` | Auto-generated bindings | âŒ No | âŒ No (DFX-managed) |
| `docs/` | Documentation | âœ… Yes | âŒ No (well-organized) |
| `benchmarks/` | Test scripts | âœ… Yes | âŒ No (clean structure) |

**Bottom Line:** Your project structure is **already production-ready**. The nested folders exist for good reasons and follow industry standards.
